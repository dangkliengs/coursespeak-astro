---
import Layout from "../layouts/Layout.astro";
import AdminAuthGate from "../components/AdminAuthGate";

const pageTitle = "Admin Dashboard - CourseSpeak";
const pageDescription = "Manage courses and deals on CourseSpeak admin dashboard.";

// EMERGENCY: Block production at Astro level
const isProduction = Astro.url.hostname?.includes('.com') && !Astro.url.hostname?.includes('localhost');
---

{isProduction ? (
  <Layout title={pageTitle} description={pageDescription}>
    <div style={{ 
      padding: "4rem", 
      textAlign: "center", 
      backgroundColor: "#0b0d12", 
      color: "#e2e8f0",
      minHeight: "100vh"
    }}>
      <h2 style={{ fontSize: "2rem", marginBottom: "1rem" }}>ðŸš« Admin Access Blocked</h2>
      <p style={{ fontSize: "1.125rem", marginBottom: "1rem", color: "#a9b0c0" }}>
        Admin access is restricted to local development only
      </p>
      <small style={{ color: "#64748b" }}>Hostname: {Astro.url.hostname || 'unknown'}</small>
    </div>
  </Layout>
) : (
<Layout title={pageTitle} description={pageDescription}>
  <AdminAuthGate>
  <div style={{ background: "#0b0d12", minHeight: "100vh", color: "#e2e8f0" }}>
    <div style={{ maxWidth: "1200px", margin: "0 auto", padding: "2rem 1rem" }}>
      <div style={{ marginBottom: "2rem" }}>
        <h1 style={{ 
          fontSize: "2.5rem", 
          fontWeight: 700, 
          color: "#fff", 
          marginBottom: "0.5rem" 
        }}>
          Admin Dashboard
        </h1>
        <p style={{ 
          fontSize: "1.125rem", 
          color: "#a9b0c0", 
          marginBottom: "2rem" 
        }}>
          Manage courses, deals, and content
        </p>
      </div>

      <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fit, minmax(300px, 1fr))", gap: "1.5rem" }}>
        <div style={{
          padding: "2rem",
          borderRadius: "1rem",
          border: "1px solid rgba(91, 140, 255, 0.24)",
          background: "linear-gradient(140deg, rgba(11, 13, 18, 0.98) 0%, rgba(18, 24, 40, 0.98) 55%, rgba(42, 64, 110, 0.38) 100%)",
          boxShadow: "0 18px 36px rgba(8, 12, 26, 0.45)"
        }}>
          <h3 style={{ color: "#fff", marginBottom: "1rem", fontSize: "1.5rem" }}>Manage Deals</h3>
          <p style={{ color: "#a9b0c0", marginBottom: "1.5rem" }}>
            Create, edit, and delete course deals
          </p>
          <div style={{ display: "flex", flexDirection: "column", gap: "0.75rem" }}>
            <a href="/admin/deals/create" style={{
              display: "inline-block",
              padding: "0.75rem 1.5rem",
              backgroundColor: "#3b82f6",
              color: "#fff",
              textDecoration: "none",
              borderRadius: "0.5rem",
              fontWeight: 600,
              textAlign: "center"
            }}>
              + Create New Deal
            </a>
            <a href="/admin/deals" style={{
              display: "inline-block",
              padding: "0.75rem 1.5rem",
              backgroundColor: "transparent",
              color: "#3b82f6",
              border: "1px solid #3b82f6",
              textDecoration: "none",
              borderRadius: "0.5rem",
              fontWeight: 600,
              textAlign: "center"
            }}>
              View All Deals
            </a>
          </div>
        </div>

        <div style={{
          padding: "2rem",
          borderRadius: "1rem",
          border: "1px solid rgba(91, 140, 255, 0.24)",
          background: "linear-gradient(140deg, rgba(11, 13, 18, 0.98) 0%, rgba(18, 24, 40, 0.98) 55%, rgba(42, 64, 110, 0.38) 100%)",
          boxShadow: "0 18px 36px rgba(8, 12, 26, 0.45)"
        }}>
          <h3 style={{ color: "#fff", marginBottom: "1rem", fontSize: "1.5rem" }}>Analytics</h3>
          <p style={{ color: "#a9b0c0", marginBottom: "1.5rem" }}>
            View site statistics and performance
          </p>
          <a href="/admin/analytics" style={{
            display: "inline-block",
            padding: "0.75rem 1.5rem",
            backgroundColor: "transparent",
            color: "#3b82f6",
            border: "1px solid #3b82f6",
            textDecoration: "none",
            borderRadius: "0.5rem",
            fontWeight: 600,
            textAlign: "center"
          }}>
            View Analytics
          </a>
        </div>
      </div>

      <div style={{ marginTop: "3rem", padding: "1.5rem", backgroundColor: "rgba(59, 130, 246, 0.1)", borderRadius: "0.5rem", border: "1px solid rgba(59, 130, 246, 0.3)" }}>
        <h4 style={{ color: "#fff", marginBottom: "1rem" }}>Quick Stats</h4>
        <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fit, minmax(200px, 1fr))", gap: "1rem" }}>
          <div>
            <div style={{ fontSize: "2rem", fontWeight: 700, color: "#3b82f6" }}>882</div>
            <div style={{ color: "#a9b0c0" }}>Total Deals</div>
          </div>
          <div>
            <div style={{ fontSize: "2rem", fontWeight: 700, color: "#3b82f6" }}>15</div>
            <div style={{ color: "#a9b0c0" }}>Categories</div>
          </div>
          <div>
            <div style={{ fontSize: "2rem", fontWeight: 700, color: "#3b82f6" }}>5</div>
            <div style={{ color: "#a9b0c0" }}>Providers</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </AdminAuthGate>
</Layout>
)}
